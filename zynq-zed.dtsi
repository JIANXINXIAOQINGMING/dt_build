/include/ "zynq.dtsi"

/ {
	model = "Xilinx Zynq ZED";
	memory {
		device_type = "memory";
		reg = <0x000000000 0x20000000>;
	};

	chosen {
//		bootargs = "console=ttyPS0,115200 root=/dev/ram rw initrd=0x1100000,33M ip=:::::eth0:dhcp earlyprintk";
		bootargs = "console=ttyPS0,115200 root=/dev/mmcblk0p2 rw earlyprintk rootfstype=ext4 rootwait";
		linux,stdout-path = "/amba@0/uart@E0001000";
	};

	usb_phy0: phy0 {
		compatible = "ulpi-phy";
		#phy-cells = <0>;
		reg = <0xe0002000 0x1000>;
		view-port = <0x0170>;
		drv-vbus;
	};

};

&eth {
	phy-handle = <&phy0>;
	phy-mode = "rgmii-id";

	phy0: phy@0 {
		device_type = "ethernet-phy";
		reg = <0x0>;
		marvell,reg-init=<3 16 0xff00 0x1e 3 17 0xfff0 0x0a>;
	};
};


&usb0 {
	xlnx,phy-reset-gpio = <&gpio0 7 0>;
	status = "okay";
	//dr_mode = "peripheral";
	dr_mode = "host";
	usb-phy = <&usb_phy0>;


};


&qspi {
	status = "okay";
	is-dual = <0>;
	num-cs = <1>;
	primary_flash: ps7-qspi@0 {
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "n25q128a11";
		reg = <0x0>;
		spi-max-frequency = <50000000>;
//		partition@0x00000000 {
//			label = "boot";
//			reg = <0x00000000 0x00500000>;
//		};
//		partition@0x00500000 {
//			label = "bootenv";
//			reg = <0x00500000 0x00020000>;
//		};
//		partition@0x00520000 {
//			label = "config";
//			reg = <0x00520000 0x00020000>;
//		};
//		partition@0x00540000 {
//			label = "image";
//			reg = <0x00540000 0x00a80000>;
//		};
//		partition@0x00fc0000 {
//			label = "spare";
//			reg = <0x00fc0000 0x00000000>;
//		};

		partition@1 {
			label = "QSPIFLASH.bootloader";
			reg = <0x100000 0x020000>;	//0x020,000 =128KB
		};
		partition@2 {
			label = "QSPIFLASH.bitstream";
			reg = <0x120000 0x600000>;	//0x600,000 = 6MB
		};
		partition@3 {
			label = "QSPIFLASH.kernel";
			reg = <0x720000 0x600000>;	//0x600,000 = 6MB
		};
		partition@4 {
			label = "QSPIFLASH.devicetree";
			reg = <0xD20000 0x020000>;	//0x020,000 =128KB
		};
		partition@5 {
			label = "QSPIFLASH.rootfs";
			reg = <0xD40000 0x00000000>;	//0xC00,000=12MB, 0x2000,000=32MB
		};
		//partition@6 {
		//	label = "QSPIFLASH.data";
		//	reg = <0x2D40000 0x00000000>;
		//};

	};
};
